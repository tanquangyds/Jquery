<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./assets/css/modal.css">
    <link rel="stylesheet" href="./assets/css/nomalize.css">
    <link rel="stylesheet" href="./assets/css/reset.local.css">
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700&display=swap" rel="stylesheet">

</head>
<body class="body" >
    <div class="nav__overlay" id="nav__overlay"></div>
    <header>
        <div class="grid wide">
            <div class="header__container">
                <div class="list__menu show-on-mobile-tablet" id="listMenu">
                    <img  class="list__menu_img" src="https://img.icons8.com/flat_round/64/000000/list.png"/>
                </div>
                <div class="logo">
                    <img src="./assets/img/logo.png" alt="" class="img_logo">
                </div>
                <div class="header__nav">
                    <ul class="nav__list">
                        <li class="nav__item">
                            Home
                        </li>
                        <li class="nav__item " id="logInBtn">
                            Login/Register
                        </li>
                        <li class="nav__item" id="colorThemes">
                            Dark mode
                        </li>
                        <li class="nav__item display-none" id="logOutBtn">
                            Logout
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <main>
        <div class="showcase">
            <div class="showcase__content">
                <div class="showcase__subtitle">
                    Food app
                </div>
                <div class="showcase__title">
                    Why stay hungry when <br> you can order from Bella Onojie
                </div>
                <div class="showcase__text">
                    Download the bella onoje's food app now on
                </div>
                <div class="showcase__download">
                    <button class="btn btn_showcase btn--primary">Playstore</button>
                    <button class="btn btn_showcase">App store</button>
                </div>
            </div>
        </div>
        <div class="grid wide">
            <div class="overview hide-on-mobile">
                <img src="./assets/img/oveview_img.png" alt="" class="overview__img">
            </div>
            <div class="manual">
                <h2 class="manual__title">How the app works</h2>
                <div class="manual__main">
                    <div class="munual__img">
                        <img class="manual__img__link" src="./assets/img/ft1.png" alt="">
                    </div>
                    <div class="manual__feature">
                        <h5 class="feature__subtitle">
                            Created an account
                        </h5>
                        <h6 class="feature__title">
                            Create/login to an existing <br> account to get started
                        </h6>
                        <p class="feature__detail">
                            An account is created with your email <br> and a desired password.
                        </p>
                    </div>
                </div>
                <div class="manual__main manual__main--2">
                    <div class="manual__feature manual__feature--2">
                        <h5 class="feature__subtitle">
                            Explore varieties
                        </h5>
                        <h6 class="feature__title">
                            Shop for your favorites <br> meal as e dey hot.
                        </h6>
                        <p class="feature__detail">
                            Shop for your favorites meal or drinks <br> and enjoy white doing it.
                        </p>
                    </div>
                    <div class="munual__img ">
                        <img class="manual__img__link manual__img__link--2" src="./assets/img/ft2.png" alt="">
                    </div>
                </div>
                <div class="manual__main manual__main--3">
                    <div class="munual__img">
                        <img class="manual__img__link" src="./assets/img/ft3.png" alt="">
                    </div>
                    <div class="manual__feature">
                        <h5 class="feature__subtitle">
                            Checkout
                        </h5>
                        <h6 class="feature__title">
                            When you done check out <br> and get it delivered.
                        </h6>
                        <p class="feature__detail">
                            When you done check out and get it <br> delivered with ease.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="showcase showcase--bottom">
            <div class="showcase__content">
                <div class="showcase__download__title">
                    Download the app now
                </div>
                <div class="showcase__download__text">
                    Available on your favorite store. Star your premium experience now
                </div>
                <div class="showcase__download__btn">
                    <button class="btn btn--primary btn--square">Playstore</button>
                    <button class="btn btn--square">App store</button>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="grid wide">
            <div class="footer__container">
                <div class="logo_footer">
                    <img src="./assets/img/logo.png" alt="" class="img_logo">
                </div>
                <div class="social">
                    <a href="" class="social__link">
                        <img class="social__img" src="./assets/img/twiiter.svg" alt="">
                    </a>
                    <a href="" class="social__link">
                        <img class="social__img" src="./assets/img/facebook.svg" alt="">
                    </a>
                    <a href="" class="social__link">
                        <img class="social__img" src="./assets/img/ig.svg" alt="">
                    </a>
                </div>
                <div class="copyrighgt">
                    <p class="copyright__text">Copyright 2020 Bella Onojie.com</p>
                </div>
            </div>
        </div>
    </footer>
    <!-- modal -->
    <div class="modal" id="logInModal">
        <!-- overlay -->
        <div class="modal__overlay" id="modal__overlay" ></div>
        <!-- modal body -->
        <div class="modal__body" id="modalBody">
            <form action="" method="POST" class="form form--login" id="form-2">
                <div class="form-group">
                    <label for="username" class="form-label">Username</label>
                    <input id="username" name="username" type="text" class="form-control">
                    <span class="form-message"></span>
                  </div>
          
                <div class="form-group">
                  <label for="password" class="form-label">Password</label>
                  <input id="password" name="password" type="password" class="form-control">
                  <span class="form-message"></span>
                </div>
          
                <button class="form-submit">Login</button>
                <p class="form-notice">
                    Click out to hide modal
                </p>
            </form>
            <!-- register form -->
            <form action="" method="POST" class="form form--register" id="form-1">
              <div class="form-group">
                <label for="username" class="form-label">Username</label>
                <input id="username" name="username" type="text" class="form-control">
                <span class="form-message"></span>
              </div>
    
              <div class="form-group">
                <label for="password" class="form-label">Password</label>
                <input id="password" name="password" type="password" class="form-control">
                <span class="form-message"></span>
              </div>
        
              <div class="form-group">
                <label for="password_confirmation" class="form-label">Confirm Password</label>
                <input id="password_confirmation" name="password_confirmation" type="password" class="form-control">
                <span class="form-message"></span>
              </div>
    
              <div class="form-group">
                <label for="phone" class="form-label">Phone number</label>
                <input id="phone" name="phone" type="text" class="form-control">
                <span class="form-message"></span>
              </div>
    
              <div class="form-group">
                <label for="address" class="form-label">Address</label>
                <input id="address" name="address" type="text" class="form-control">
                <span class="form-message"></span>
              </div>
        
              <button class="form-submit">Register</button>
            </form>
        </div>
        
    </div>
    <!-- Sweet Alert 2- Successful Login/Register -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="./assets/js/validator.js"></script>
    <script src="./assets/js/modal_handler.js"></script>
    <!-- Validator -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // created data array save register object
            var arrData = [];
            // register validator
            Validator({
                form: '#form-1',
                formGroupSelector: '.form-group',
                errorSelector: '.form-message',
                rules: [
                Validator.isRequired('#username'),
                Validator.isUsername('#username'),
                Validator.minLength('#username', 6, 'Username must be at least 6 characters long'),
                Validator.maxLength('#username', 20, 'Username must be maximum 20 characters long'),
                Validator.minLength('#password', 6),
                Validator.maxLength('#password', 12),
                Validator.isPassword('#password'),
                Validator.isRequired('#password_confirmation'),
                Validator.isConfirmed('#password_confirmation', function () {
                    return document.querySelector('#form-1 #password').value;
                }, 'Password and confirm password do not match'),
                Validator.isRequired('#phone'),
                Validator.isPhoneNumber('#phone'),
                ],
                onSubmit: function (data) {
                    Swal.fire({
                            icon: 'success',
                            title: `Thank you for your registration!`,
                            showConfirmButton: true,
                            confirmButtonText: 
                            '<i>Login now</i>',
                            // timer: 1500,
                    })
                    arrData.push(data);
                    localStorage['data'] = JSON.stringify(arrData);
                }
            });
            // login validator
            Validator({
                form: '#form-2',
                formGroupSelector: '.form-group',
                errorSelector: '.form-message',
                rules: [
                Validator.isRequired('#username'),
                Validator.isUsername('#username'),
                Validator.minLength('#username', 6, 'Username must be at least 6 characters long'),
                Validator.maxLength('#username', 20, 'Username must be maximum 20 characters long'),
                Validator.minLength('#password', 6),
                Validator.maxLength('#password', 12),
                Validator.isPassword('#password'),
                ],
                onSubmit: function (data) {
                    // get username and password
                    var userName = data.username;
                    var password = data.password;
                    // get data from local storage
                    showData = JSON.parse(localStorage['data']);
                    // verify user
                    var isVerified = false;
                    showData.forEach(function (el) {
                        if (el.username === userName && el.password === password) {
                            isVerified = true;
                        };
                    });
                    if (isVerified) {
                        Swal.fire({
                            icon: 'success',
                            title: `Welcome to Bella onoje's food`,
                            showConfirmButton: false,
                            timer: 1500,
                        });
                        document.getElementById('logInBtn').classList.add('disable');
                        document.getElementById('logInBtn').innerText = `Hello: ${userName}`;
                        logOutBtn.classList.remove('display-none');
                        setTimeout(closeModal, 1500);
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'Wrong username or password!',
                            showConfirmButton: true,
                            confirmButtonText: 'Retry',
                        })
                        isLogin = false;
                    }
                }
            });
            
            logInBtn.onclick = function() {
                isLogin();
            }
            window.onclick = function(event) {
                if (event.target == modalOverlay) {
                    closeModal(event.target == navOverlay);
                }
                if (event.target == navOverlay) {
                    document.querySelector('.nav__list').classList.toggle('nav__list--slideLefts');
                    navOverlay.classList.toggle('nav__overlay--fadeOut');
                }
            };
            // logout button
            logOutBtn.onclick = function() {
                logInBtn.innerText = 'Login/Register';
                logOutBtn.classList.add('display-none');
                document.getElementById('logInBtn').classList.remove('disable');
            };
            // change mode
            document.querySelector('#colorThemes').onclick = function() {
                var  body = document.querySelector('.body');
                if (body.classList.contains('dark')) {
                    document.querySelector('.body').classList.remove('dark');
                    document.querySelector('#colorThemes').innerText = 'Dark Mode';
                } else {
                    document.querySelector('.body').classList.add('dark');
                    document.querySelector('#colorThemes').innerText = 'Light Mode';
                }
                
            }
            // mobile-tablet 
            document.querySelector('#listMenu').onclick = function() {
                document.querySelector('.nav__list').classList.toggle('nav__list--slideLefts');
                navOverlay.classList.toggle('nav__overlay--fadeOut');
            }
        });
        
    </script>
</body>
</html>